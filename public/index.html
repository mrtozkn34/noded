<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>ChatGPT Destekli Haxball Odas覺</title>
  <!-- haxballheadless.js dosyas覺n覺 public klas繹r羹nden y羹kle -->
  <script src="haxballheadless.js"></script>
</head>
<body>
  <h1>ChatGPT Destekli Haxball Odas覺</h1>
  <script>
    window.onload = () => {
      const room = HBInit({
        roomName: "ChatGPT Destekli Haxball Odas覺",
        maxPlayers: 8,
        public: true,
        noPlayer: true,
      });

      room.setDefaultStadium("Classic");
      room.setScoreLimit(3);
      room.setTimeLimit(5);

      room.onPlayerJoin = (player) => {
        room.sendChat(`Ho geldin, ${player.name}! Sohbet etmek i癟in bir ey yazabilirsin.`);
      };

      room.onPlayerChat = (player, message) => {
        fetch('/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message }),
        })
          .then(res => res.json())
          .then(data => {
            room.sendChat(`@${player.name} ${data.reply}`);
          })
          .catch(() => {
            room.sendChat(" Yapay zeka cevap veremedi.");
          });
        return false;
      };
    };
  </script>
</body>
</html>
